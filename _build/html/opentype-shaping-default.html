
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Default script shaping in OpenType &#8212; OpenType Shaping Documents  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="default-script-shaping-in-opentype">
<h1>Default script shaping in OpenType<a class="headerlink" href="#default-script-shaping-in-opentype" title="Permalink to this heading">¶</a></h1>
<p>This document details the default shaping procedure needed to display
text runs in non-complex scripts. It may also be used as a fallback
model for unrecognized scripts.</p>
<p><strong>Table of Contents</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#general-information"><span class="std std-doc">General information</span></a></p></li>
<li><p><a class="reference internal" href="#terminology"><span class="std std-doc">Terminology</span></a></p></li>
<li><p><span class="xref myst">Glyph classification</span></p></li>
<li><p><a class="reference internal" href="#normalization"><span class="std std-doc">Normalization</span></a></p></li>
<li><p><a class="reference internal" href="#the-default-shaping-model"><span class="std std-doc">The default shaping model</span></a></p>
<ul>
<li><p><a class="reference internal" href="#applying-the-basic-substitution-features-from-gsub"><span class="std std-doc">1: Applying the basic substitution features from GSUB</span></a></p></li>
<li><p><a class="reference internal" href="#applying-typographic-substitution-features-from-gsub"><span class="std std-doc">2: Applying typographic substitution features from GSUB</span></a></p></li>
<li><p><a class="reference internal" href="#applying-the-positioning-features-from-gpos"><span class="std std-doc">3: Applying the positioning features from GPOS</span></a></p></li>
</ul>
</li>
</ul>
<section id="general-information">
<h2>General information<a class="headerlink" href="#general-information" title="Permalink to this heading">¶</a></h2>
<p>The default OpenType shaping model is used for scripts that are
considered <em>non-complex</em> from the shaper’s perspective. This
designation means that shaping a text run does not involve glyph
reordering, contextual joining behavior, or the substitution of
context-dependent forms for linguistic or orthographic correctness.</p>
<p>Text runs in non-complex scripts may, however, involve ligature
substitution, Unicode normalization, mark positioning, kerning, and
the application of other features from the active font’s GSUB and GPOS
tables.</p>
<p>The non-complex scripts covered by this model include Latin, Cyrillic,
Greek, Armenian, Georgian, Ethiopic, Cherokee, Tifinagh, and many others.</p>
</section>
<section id="terminology">
<h2>Terminology<a class="headerlink" href="#terminology" title="Permalink to this heading">¶</a></h2>
<p>Many of these scripts support diacritics and other <strong>marks</strong>. Unicode may
contain <strong>precomposed</strong> mark-and-base codepoints for some or all
combinations of marks and base letters in the script. For combinations
without a codepoint, the desired form can be achieved by following the
<strong>base</strong> letter with a <strong>combining mark</strong> codepoint.</p>
<p>The primary concern for the shaping engine is processing the text run into
the correct normalized form, so that the best glyphs from the active
font can be selected from among the available precomposed and
combining alternatives.</p>
<p>Fonts for non-complex scripts might not include a GSUB or GPOS table
at all.</p>
<p>However, GSUB and GPOS may also be used to implement a variety of
OpenType smart features, including several classes of ligature,
contextual alternate, or contextual positioning rules. Because these
features are not required in order to render the text run
orthographically correct, the features are not considered shaping
features. Nevertheless, the shaping engine may be expected to apply
these features in order to simplify the overall text-rendering
architecture of the implementation.</p>
</section>
<section id="normalization">
<h2>Normalization<a class="headerlink" href="#normalization" title="Permalink to this heading">¶</a></h2>
<p>Unicode defines algorithms for normalizing a sequence of input
codepoints into either a canonical composed form or a canonical
decomposed form. The purpose of these algorithms and of the defined
normalization forms is to determine equivalent representations of input
sequences regardless of variations in the input sequences.</p>
<p>For example, a base letter with an attached mark might exist in
Unicode as a single codepoint, but an input sequence might consist of
the base letter codepoint followed by the combining mark
codepoint. Unicode normalization can be used to determine that the
“letter, mark” sequence is equivalent to the single codepoint. This
simplifies sorting, searching, string comparison, and many other common
tasks.</p>
<p>OpenType shaping utilizes Unicode normalization, but OpenType
shaping has a distinctly different goal: to select the best or most
appropriate representation of the input codepoint sequence that is
available in the active font. A full description of the algorithm is
available in the <a class="reference internal" href="opentype-shaping-normalization.html"><span class="doc std std-doc">normalization</span></a> document.</p>
<p>Shaping some complex scripts involves explicit composition or
decomposition steps. The default shaping model does not involve any
such steps, but it does proceed with the general assumption that text
runs have been normalized as part of input sanitization.</p>
<p>For convenience, shaping engines may choose to implement a single
normalization routine for all scripts, default and complex. If
normalization is done before the shaping-model–specific processing is
done, then there may be no work required in certain shaping steps
(such as the processing of <code class="docutils literal notranslate"><span class="pre">ccmp</span></code> substitutions from GSUB). However,
these steps will always be described in the relevant script’s shaping
document.</p>
</section>
<section id="the-default-shaping-model">
<h2>The default shaping model<a class="headerlink" href="#the-default-shaping-model" title="Permalink to this heading">¶</a></h2>
<p>Processing a run of text in the default shaping model involves three
top-level stages:</p>
<ol class="arabic simple">
<li><p>Applying the basic substitution features from GSUB</p></li>
<li><p>Applying typographic substitution features from GSUB</p></li>
<li><p>Applying the positioning features from GPOS</p></li>
</ol>
<p>Together, these stages cover the application of all GSUB and GPOS
features that are required or that have been defined by OpenType as
being on by default.</p>
<p>For convenience, shaping engines may also choose to apply any optional
or off-by-default OpenType features that have been activated for the
text run (including those that have been
enabled by the user and those that have been enabled at the
application level). However, the order in which such features should
be applied and how they should interact with OpenType shaping features
is beyond the scope of this document.</p>
<p>The default shaping model does not involve syllable-identification,
word-identification, or other preprocessing of the input
sequence. Shaping engines may choose how to segment longer text runs
for processing, or may choose to reply on higher-level applications to
make segmentation decisions.</p>
<section id="applying-the-basic-substitution-features-from-gsub">
<h3>1: Applying the basic substitution features from GSUB<a class="headerlink" href="#applying-the-basic-substitution-features-from-gsub" title="Permalink to this heading">¶</a></h3>
<p>The basic-substitution stage applies mandatory substitution features
using the rules in the font’s GSUB table. In preparation for this
stage, glyph sequences should be tagged for possible application
of GSUB features.</p>
<p>These substitutions include those features designed to provide
linguistic and orthographic correctness.</p>
<p>The order in which these features are applied is not canonical; they
should be applied in the order in which they appear in the GSUB table
in the font.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>locl
ccmp
rlig
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">locl</span></code> feature replaces default glyphs with any language-specific
variants, based on examining the language setting of the text run.</p>
<blockquote>
<div><p>Note: Strictly speaking, the use of localized-form substitutions is
not part of the shaping process, but of the localization process,
and could take place at an earlier point while handling the text
run. However, shaping engines are expected to complete the
application of the <code class="docutils literal notranslate"><span class="pre">locl</span></code> feature before applying the subsequent
GSUB substitutions in the following steps.</p>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">ccmp</span></code> feature allows a font to substitute mark-and-base sequences
with a pre-composed glyph including the mark and the base, or to
substitute a single glyph into an equivalent decomposed sequence of
glyphs.</p>
<p>If present, these composition and decomposition substitutions must be
performed before applying any other GSUB lookups, because
those lookups may be written to match only the <code class="docutils literal notranslate"><span class="pre">ccmp</span></code>-substituted
glyphs.</p>
<blockquote>
<div><p>Note: The <code class="docutils literal notranslate"><span class="pre">ccmp</span></code> feature may perform compositions or decompositions
of glyph sequences that do not have a canonical decomposition
defined in Unicode.</p>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">rlig</span></code> feature substitutes glyph sequences with mandatory
ligatures. Substitutions made by <code class="docutils literal notranslate"><span class="pre">rlig</span></code> cannot be disabled by
application-level user interfaces.</p>
</section>
<section id="applying-typographic-substitution-features-from-gsub">
<h3>2: Applying typographic substitution features from GSUB<a class="headerlink" href="#applying-typographic-substitution-features-from-gsub" title="Permalink to this heading">¶</a></h3>
<p>The typographic-substitution phase applies all remaining substitution
features using the rules in the font’s GSUB table. In preparation for
this stage, glyph sequences should be tagged for possible application
of GSUB features.</p>
<p>These substitutions include those features designed to provide
typographic consistency and correctness.</p>
<p>The order in which these features are applied is not canonical; they
should be applied in the order in which they appear in the GSUB table
in the font.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>rclt
calt
clig
liga
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">rclt</span></code> feature substitutes glyphs with contextual alternate
forms. In general, the <code class="docutils literal notranslate"><span class="pre">rclt</span></code> feature is used to perform such
substitutions that are required by the orthography of the active
script and language. Substitutions made by <code class="docutils literal notranslate"><span class="pre">rclt</span></code> cannot be disabled
by application-level user interfaces.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">calt</span></code> feature substitutes glyphs with contextual alternate
forms. In general, the <code class="docutils literal notranslate"><span class="pre">calt</span></code> feature performs substitutions that are
not mandatory for orthographic correctness. However, unlike <code class="docutils literal notranslate"><span class="pre">rclt</span></code>,
the substitutions made by <code class="docutils literal notranslate"><span class="pre">calt</span></code> can be disabled by application-level
user interfaces.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">clig</span></code> feature substitutes optional ligatures that are on by
default, but which are activated only in certain
contexts. Substitutions made by <code class="docutils literal notranslate"><span class="pre">clig</span></code> may be disabled by
application-level user interfaces.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">liga</span></code> feature substitutes standard, optional ligatures that are on
by default. Substitutions made by <code class="docutils literal notranslate"><span class="pre">liga</span></code> may be disabled by
application-level user interfaces.</p>
</section>
<section id="applying-the-positioning-features-from-gpos">
<h3>3: Applying the positioning features from GPOS<a class="headerlink" href="#applying-the-positioning-features-from-gpos" title="Permalink to this heading">¶</a></h3>
<p>The positioning stage adjusts the positions of mark and base
glyphs. In preparation for this stage, glyph sequences should be
tagged for possible application of GPOS features.</p>
<p>The order in which these features are applied is not canonical; they
should be applied in the order in which they appear in the GSUB table
in the font.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>curs
dist
kern
mark
mkmk
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">curs</span></code> feature perform cursive positioning. Each glyph has an
entry point and exit point; the <code class="docutils literal notranslate"><span class="pre">curs</span></code> feature positions glyphs so
that the entry point of the current glyph meets the exit point of the
preceding glyph.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">dist</span></code> feature adjusts the horizontal positioning of
glyphs. Unlike <code class="docutils literal notranslate"><span class="pre">kern</span></code>, adjustments made with <code class="docutils literal notranslate"><span class="pre">dist</span></code> do not require the
application or the user to enable any software kerning features, if
such features are optional.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">kern</span></code> adjusts glyph spacing between pairs of adjacent glyphs.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">mark</span></code> feature positions marks with respect to base glyphs.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">mkmk</span></code> feature positions marks with respect to preceding marks,
providing proper positioning for sequences of marks that attach to the
same base glyph.</p>
<!---
collect features
override features
data create
data destroy
preprocess text
postprocess glyphs
normalization mode default
decompose
compose
setup masks
disable otl
reorder marks
zero width marks by gdef late
fallback position
--->
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">OpenType Shaping Documents</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=n8willis&repo=opentype-shaping-documents&type=watch&count=True&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="README.html">Scripts</a></li>
    
    <li class="toctree-l1"><a href="character-tables/character-tables-index.html">Character tables</a></li>
    
    <li class="toctree-l1"><a href="opentype-shaping-normalization.html">Normalization</a></li>
    
    <li class="toctree-l1"><a href="notes/README.html">Notes</a></li>
    
    <li class="toctree-l1"><a href="errata.html">Errata</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Sponsored by YesLogic.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/opentype-shaping-default.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>